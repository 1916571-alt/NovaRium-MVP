# NovaRium-MVP: AI Agent 협업 튜토리얼

이 문서는 AI Agent와 함께 **NovaRium-MVP** 프로젝트를 구축하는 과정을 기록한 튜토리얼입니다. 실제 사용된 프롬프트와 에이전트의 수행 결과를 중심으로 정리했습니다.

## 1. 프로젝트 기획 (Ideation & PRD)

가장 먼저 프로젝트의 아이디어를 구체화하고 요구사항을 정의했습니다.

### 🗣️ Prompt
> "데이터 분석가로서의 역량을 보여줄 수 있는 로컬 퍼스트 데이터 분석 프로젝트 아이디어를 제안해줘."
> "제안된 아이디어를 바탕으로 PRD(제품 요구사항 문서)를 작성해줘."
> "PRD를 기반으로 구현해야 할 작업 목록을 task.md에 정리해줘."

### 🤖 Agent Action
*   **`Ideation.md`**: 프로젝트 아이디어 스케치 작성.
*   **`PRD.md`**: 상세 기능, 기술 스택, 구현 로드맵 정의.
*   **`task.md`**: 구현 단계별 체크리스트 생성.

---

## 2. 프로젝트 셋업 및 깃허브 호스팅

로컬 프로젝트 폴더를 깃허브 퍼블릭 리포지토리로 호스팅했습니다.

### 🗣️ Prompt
> "이 프로젝트를 github에 호스팅해줘. 퍼블릭 리포지토리로 만들어줘."

### 🤖 Agent Action
1.  **Git 초기화**: `git init` 실행.
2.  **설정 파일 생성**: Python 프로젝트에 맞는 `.gitignore` 자동 생성.
3.  **커밋**: 초기 파일들(`Ideation.md`, `PRD.md`, `task.md`) 커밋.
4.  **리포지토리 생성 및 푸시**:
    ```bash
    gh repo create NovaRium-MVP --public --source=. --push
    ```

### ✅ Result
*   GitHub Repository 생성 완료: [NovaRium-MVP](https://github.com/1916571-alt/NovaRium-MVP)

---

## 3. 태스크 관리 (GitHub Issues 자동 생성)

단순한 텍스트 할 일 목록(`task.md`)을 실제 깃허브 이슈로 변환하여 관리 체계를 구축했습니다.

### 🗣️ Prompt
> "태스크의 항목들을 깃헙 이슈로 등록해줘. 이슈에는 작업 배경, 작업 내용, 인수 조건이 포함 되어야 해."

### 🤖 Agent Action
1.  **구현 계획 수립**: `task.md`와 `PRD.md`를 분석하여 17개의 이슈 세부 내용(배경, 상세, 인수조건)을 매핑.
2.  **자동화 스크립트 작성**: `create_gh_issues.py` 파이썬 스크립트 생성.
    *   GitHub CLI(`gh`)를 사용하여 이슈를 일괄 생성하는 스크립트.
3.  **스크립트 실행**: 스크립트를 실행하여 리포지토리에 이슈 등록.
4.  **정리**: 사용한 임시 스크립트 삭제.

### ✅ Result
*   [GitHub Issues 목록](https://github.com/1916571-alt/NovaRium-MVP/issues)에 17개 태스크가 상세 내용과 함께 등록됨.

---

## 4. 튜토리얼 문서화

현재까지의 작업 과정을 문서화하여 기록으로 남깁니다.

### 🗣️ Prompt
> "지금까지 작업한 것을 프롬프트 중심으로 튜토리얼로 만들어줘. 튜토리얼은 Tutorial.md 파일에 문서화해줘"

### 🤖 Agent Action
*   **`Tutorial.md`**: 본 문서 작성.

---

## 5. 심화 기능 구현 (Advanced Features)

AI Agent와 협업하여 실험의 안전성과 현실성을 크게 향상시켰습니다.

### 5-1. 가드레일 지표 (Guardrail Metrics)

실험이 성공하더라도 부작용(환불 급증, 앱 크래시 등)이 발생하면 중단해야 합니다.

#### 🗣️ Prompt
> "실험의 부작용을 감지할 수 있는 Guardrail Metric 기능을 추가해줘. 환불률(Refund Rate)이 임계치를 넘으면 경고를 띄워야 해."

#### 🤖 Agent Action
1.  **Step 1 UI 개선**: Primary Metric(OEC) 외에 Guardrail Metric 선택 UI 추가.
2.  **임계치 설정**: 사용자가 허용 가능한 환불률 임계치(예: 5%)를 입력하도록 구현.
3.  **Step 4 분석 로직**: 
    *   환불 이벤트를 집계하여 A/B 그룹별 환불률 계산.
    *   B안의 환불률이 임계치를 초과하면 **"조기 종료 경고(Early Stopping)"** 발령.
4.  **시뮬레이션 연동**: Agent Swarm 투입 시, 구매 후 일정 확률로 환불 이벤트 생성.

#### ✅ Result
*   실험의 안전성을 보장하는 Safety Net 구축 완료.

---

### 5-2. Agent Swarm 2.0 (스마트 에이전트)

단순 확률 기반 시뮬레이션을 넘어, 5가지 성향을 가진 AI 에이전트들이 실제 앱을 방문하여 행동하는 현실적인 시뮬레이션을 구현했습니다.

#### 🗣️ Prompt
> "Agent Swarm에 5가지 페르소나(충동형, 계산형, 윈도우쇼핑, 목적형, 신중형)를 추가하고, 각 유형의 비율을 사용자가 직접 조정할 수 있게 해줘."

#### 🤖 Agent Action
1.  **5가지 페르소나 정의**:
    *   **충동형(Impulsive)**: 빨간색, "긴급" 문구에 즉각 반응 (CTR 30%, CVR 25%).
    *   **계산형(Calculator)**: 할인율을 꼼꼼히 계산 (CTR 20%, CVR 20%).
    *   **윈도우쇼핑(Browser)**: 클릭은 많지만 구매는 드뭄 (CTR 50%, CVR 2%).
    *   **목적형(Mission)**: 원하는 게 명확, 빠르게 구매 (CTR 15%, CVR 40%).
    *   **신중형(Cautious)**: 리뷰 읽고 고민 (CTR 8%, CVR 10%).

2.  **동적 분포 조정 UI**: 
    *   Step 3에 5개의 슬라이더 추가 (각 유형별 비율 조정).
    *   합계가 100%가 아니면 경고 메시지 표시.

3.  **실전 검증 로직**:
    *   에이전트 투입 완료 후, 실제 DB에 기록된 데이터 수를 검증.
    *   DB에 데이터가 없으면 "Target App이 실행 중인지 확인하세요" 에러 표시.

4.  **장단점 제거**: 
    *   사용자 피드백에 따라 "장점/단점" 설명을 제거하고 순수하게 "어떻게 작동하는지"만 설명.

#### ✅ Result
*   더 현실적인 사용자 행동 패턴 시뮬레이션 가능.
*   실험 결과의 신뢰도 향상.

---

### 5-3. 모니터링 대시보드 강화 (Monitoring Dashboard)

30일치 히스토리 데이터를 보호하고, 위기 상황을 자동 감지하는 기능을 추가했습니다.

#### 🗣️ Prompt
> "모니터링 대시보드의 30일치 데이터가 실험 실행 시 삭제되는 문제를 해결해줘. 그리고 CTR이 급락하면 자동으로 경고를 띄워줘."

#### 🤖 Agent Action
1.  **데이터 분리 전략**:
    *   실험 데이터: `sim_*`, `agent_*` (실험 종료 시 삭제).
    *   히스토리 데이터: `user_hist_*` (영구 보존).
    *   Step 4 회고록 저장 시, 실험 데이터만 삭제하도록 SQL 쿼리 수정.

2.  **Crisis Alert 시스템**:
    *   최근 3일간 CTR이 5% 미만으로 떨어지면 **"비상 경고"** 발령.
    *   경고 화면에서 "🛠️ 실험으로 해결하기" 버튼 클릭 시, 자동으로 Step 1로 이동하며 Target 자동 설정.

3.  **KPI 카드 개선**:
    *   기존: 오늘 하루 데이터만 표시 → CTR 0.00% (오늘 데이터 없음).
    *   개선: 최근 30일 평균 표시 → CTR ~12-15% (정상 범위).

4.  **데이터 재생성 보호**:
    *   히스토리 데이터가 이미 존재하면 "데이터 생성" 버튼을 숨기고, "⚙️ 데이터 관리" Expander로 이동.
    *   재생성 시 확인 다이얼로그 추가 (실수 방지).

#### ✅ Result
*   안정적인 모니터링 환경 구축.
*   위기 상황 즉시 대응 가능.

---

### 5-4. 동적 지표 통합 (Dynamic Metric Integration)

사용자가 Step 1에서 선택한 지표(CTR vs CVR)에 따라 전체 시뮬레이션 및 분석 로직이 자동으로 변경되도록 구현했습니다.

#### 🗣️ Prompt
> "Step 1에서 선택한 Primary Metric(CTR 또는 CVR)이 Step 3 시뮬레이션과 Step 4 분석에 자동으로 반영되게 해줘."

#### 🤖 Agent Action
1.  **Metric-Event 매핑**:
    *   CTR → `click_banner` 이벤트 생성.
    *   CVR → `purchase` 이벤트 생성.

2.  **Step 3 시뮬레이션**:
    *   Quick Simulation: 선택한 지표에 맞는 이벤트만 생성.
    *   Agent Swarm: 각 에이전트의 행동 패턴에 따라 동적으로 이벤트 생성.

3.  **Step 4 분석**:
    *   SQL 쿼리가 선택한 지표에 맞게 자동 변경.
    *   P-value 계산 로직도 동적으로 적용.

#### ✅ Result
*   사용자 경험 개선 (수동 설정 불필요).
*   실험 설계의 일관성 보장.

# AI Agent Performance Optimization Guidelines (based on "How I Claude Code")

이 문서는 AI 에이전트(Claude Code)의 성능을 극대화하고, 대규모 프로젝트에서 컨텍스트 누락 없이 정확한 결과물을 산출하기 위한 공식 지침입니다.

---

## 1. 컨텍스트 관리 원칙 (Context Management)
* **컨텍스트 분리:** 모든 작업을 한 번에 수행하지 않는다. 탐색, 계획, 구현 단계를 물리적으로 분리하여 에이전트의 '맑은 정신'을 유지한다.
* **불필요한 정보 제거:** 현재 작업과 무관한 파일이나 로그가 컨텍스트를 점유하지 않도록 관리한다.

## 2. 작업 단계별 프로토콜 (Plan Mode)
복잡한 요구사항을 처리할 때는 반드시 다음의 단계를 준수한다.

### 1단계: 탐색 (Explore)
- 작업과 관련된 코드베이스, 컨벤션, 의존성을 먼저 파악한다.
- `ls`, `grep`, `read_file` 등을 활용해 필요한 정보만 수집한다.

### 2단계: 계획 (Plan)
- 탐색 결과를 바탕으로 구체적인 실행 계획(`PLAN.md`)을 작성한다.
- **체크리스트 포함:** 작업 단계를 세분화하여 누락 가능성을 차단한다.
- 구현을 시작하기 전, 사용자에게 계획의 적절성을 확인받고 수정 사항을 반영한다.

### 3단계: 구현 (Implement)
- 확정된 계획서를 바탕으로 실제 코드를 작성한다.
- 한 세션의 컨텍스트가 너무 커지면 세션을 초기화하고 계획서부터 다시 시작한다.

---

## 3. 고급 최적화 기법

### 3.1 서브 에이전트(Sub-agents) 위임
- 메인 에이전트는 전체적인 흐름을 관리하는 '매니저' 역할을 수행한다.
- UI 구현, 테스트 코드 작성, 리팩토링 등 독립적인 단위 작업은 서브 에이전트(하청)에게 맡겨 컨텍스트 오버헤드를 줄인다.

### 3.2 코드 기반 자동화 (Scripting)
- 수백 개의 파일을 생성하거나 반복적인 코드 수정을 할 때는 직접 타이핑하지 않는다.
- 해당 작업을 수행하는 **'일회성 스크립트(Python, TS 등)'**를 작성한 뒤 이를 실행하여 결과를 도출한다.
- 규칙적인 작업은 자연어보다 코드가 훨씬 정확하고 경제적이다.

---

## 4. 도구 및 검증 (Tools & Verification)

### 4.1 MCP (Model Context Protocol) 활용
- 프로젝트 전용 MCP를 활용하여 외부 문서, DB 스키마, 특수 도구에 접근한다.
- 반복적으로 사용되는 지식은 MCP 서버를 통해 효율적으로 공급한다.

### 4.2 자체 검증 루프 (Self-Verification)
- 구현 직후 반드시 다음 도구를 활용해 결과물을 스스로 검증한다.
    - **Build:** 프로젝트 빌드 성공 여부 확인
    - **Lint:** 코드 컨벤션 및 문법 오류 확인
    - **Test:** 관련 단위 테스트/통합 테스트 실행 결과 확인
- 오류가 발견되면 사용자가 지적하기 전에 에이전트가 스스로 수정한다.

---

## 5. 실행 체크리스트 (Summary)
1. [ ] 작업 관련 파일 탐색 완료
2. [ ] 마크다운 기반의 구체적 계획 수립 및 승인
3. [ ] (필요시) 서브 에이전트 및 스크립트 활용
4. [ ] 빌드 및 테스트를 통한 결과 검증
5. [ ] 작업 내용 요약 및 커밋

---
*Reference: Inspired by Cursor Mafia's "How I Claude Code" strategies.*